name       : zlib
version    : 1.2.11
release    : 21
source     :
    - https://github.com/madler/zlib/archive/v1.2.11.tar.gz : 629380c90a77b964d896ed37163f5c3a34f6e6d897311f1df2a7016355c45eff
homepage   : http://www.zlib.net
license    : ZLIB
component  :
    - system.base
    - minizip : system.utils
    - minizip-devel : programming.devel
summary    :
    - zlib (Compression library)
    - minizip : Mini zip and unzip based on zlib
    - minizip-devel : Development files for zlib-minizip
description:
    - The zlib library is a compression library that aims to be unobtrusive.
    - minizip : Mini zip and unzip based on zlib
    - minizip-devel : Mini zip and unzip based on zlib
devel      : yes
emul32     : yes
patterns   :
    - minizip :
        - /usr/lib64/libminizip.so.*
    - minizip-devel :
        - /usr/include/minizip/*
        - /usr/lib64/libminizip.a
        - /usr/lib64/libminizip.so
        - /usr/lib64/pkgconfig/minizip.pc
setup      : |
    %patch -p1 < $pkgfiles/no_ldconfig.patch
    ./configure --prefix=/usr --libdir=%libdir%

    # configure minizip
    pushd contrib/minizip
    if [[ -z "${EMUL32BUILD}" ]]; then
        %reconfigure
    fi
    popd
build      : |
    %make

    # build minizip
    pushd contrib/minizip
    if [[ -z "${EMUL32BUILD}" ]]; then
        %make
    fi
    popd
install    : |
    %make_install

    # install minizip
    pushd contrib/minizip
    if [[ -z "${EMUL32BUILD}" ]]; then
        %make_install
    fi
    popd
